# ============================================================================
# AP Assist Email PDF Processor - Environment Configuration
# ============================================================================
# Copy this file to .env and fill in your actual values
# 
# NEW: Processor configs (email patterns, folders, prompts) are now managed
# in NetSuite custom records - no need to add variables for each vendor!
# ============================================================================

# ----------------------------------------------------------------------------
# IMAP Email Settings (REQUIRED)
# ----------------------------------------------------------------------------
# Gmail account that receives vendor PDFs
# Note: Use App Password if 2FA is enabled on Gmail
IMAP_HOST=imap.gmail.com
IMAP_PORT=993
IMAP_USER=your-email@gmail.com
IMAP_PASSWORD=your-app-password
IMAP_TLS=true
IMAP_MAILBOX=INBOX
SEARCH_CRITERIA=UNSEEN
MARK_AS_READ=true

# Email polling interval (milliseconds)
# 300000 = 5 minutes (recommended for production)
POLL_INTERVAL_MS=300000

# ----------------------------------------------------------------------------
# Claude API Settings (REQUIRED)
# ----------------------------------------------------------------------------
# Get your API key from: https://console.anthropic.com/
ANTHROPIC_API_KEY=sk-ant-api03-your_key_here

# Recommended models:
#   claude-haiku-4-5-20251001   (fastest, lowest cost - RECOMMENDED)
#   claude-sonnet-4-5-20250929  (balanced capability/cost)
#   claude-opus-4-5-20251101    (most capable, highest cost)
CLAUDE_MODEL=claude-haiku-4-5-20251001
CLAUDE_MAX_TOKENS=4096

# ----------------------------------------------------------------------------
# NetSuite Integration (REQUIRED for dynamic configs)
# ----------------------------------------------------------------------------
# Enable dynamic config loading from NetSuite
# When true, system fetches processor configs every 10 minutes
NETSUITE_ENABLED=true

# RESTlet URL (Script 4085, Deployment 1)
NETSUITE_RESTLET_URL=https://YOUR_ACCOUNT.restlets.api.netsuite.com/app/site/hosting/restlet.nl?script=4085&deploy=1

# NetSuite Account ID
NETSUITE_ACCOUNT_ID=YOUR_ACCOUNT_ID

# OAuth 1.0a Credentials (from Integration Record in NetSuite)
NETSUITE_CONSUMER_KEY=your_consumer_key_here
NETSUITE_CONSUMER_SECRET=your_consumer_secret_here
NETSUITE_TOKEN_ID=your_token_id_here
NETSUITE_TOKEN_SECRET=your_token_secret_here

# ----------------------------------------------------------------------------
# Optional: Local File Storage (Usually disabled in production)
# ----------------------------------------------------------------------------
# Save copies of PDFs and JSON locally (useful for debugging)
SAVE_PDFS=false
SAVE_RESULTS=false
OUTPUT_DIR=./processed-pdfs
RESULTS_DIR=./results

# ----------------------------------------------------------------------------
# Legacy/Fallback Settings (Optional)
# ----------------------------------------------------------------------------
# Used only if NetSuite config fetch fails
# Keep these for redundancy, but they won't be used during normal operation

# Marcone Fallback
MARCONE_ENABLED=true
MARCONE_PDF_FOLDER_ID=5899988
MARCONE_JSON_FOLDER_ID=5899988

# Default Fallback Folders
NETSUITE_PDF_FOLDER_ID=5899988
NETSUITE_JSON_FOLDER_ID=5899988

# ============================================================================
# CONFIGURATION NOTES
# ============================================================================
#
# ✅ TO ADD A NEW VENDOR (No .env changes needed!):
#    1. Go to NetSuite > Customization > Lists, Records, & Fields
#    2. Find "AP Assist Vendor Configuration" custom record type
#    3. Create new record with:
#       - Vendor
#       - Transaction Type (Vendor Bill Credit, Vendor Bill)
#       - Email Address (exact match)
#       - Email Subject Contains (partial match)
#       - AI (Claude) Prompt (extraction instructions)
#       - PDF Folder ID and JSON Folder ID
#       - Check "Enabled"
#    4. Save - syncs automatically within 10 minutes!
#
# ✅ TO EDIT CLAUDE PROMPTS (No code deployment needed!):
#    1. Find config record in NetSuite
#    2. Edit "AI (Claude) Prompt" field
#    3. Save - syncs within 10 minutes
#
# ✅ TO DISABLE A VENDOR TEMPORARILY:
#    1. Find config record in NetSuite
#    2. Uncheck "Enabled"
#    3. Save - stops processing within 10 minutes
#
# ============================================================================
