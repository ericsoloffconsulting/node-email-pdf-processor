10 PDF TEST RESULTS SUMMARY
═══════════════════════════════════════════════════════════════

CREDIT MEMOS (Successfully Processed): 4
─────────────────────────────────────────────────────────────
1. INV #67617313 - Return Credit ✅
   • NARDA: NF (3 items)
   • Bill Numbers: N66811026 (8 digits) - All 3 items
   • SO#: 0768
   • PO#: VRMA313767
   • Total: ($62.92)
   • Status: Perfect extraction with multi-line bill number

2. INV #68979583 - Return Credit ✅
   • NARDA: BOX (1 item)
   • Bill Numbers: W91738138 (8 digits)
   • SO#: 14810
   • PO#: MO101625
   • Total: ($136.68)
   • Status: W pattern correctly extracted

3. INV #67733528 - Warranty Credit ✅
   • NARDA: CONCDAM (1 item)
   • Bill Numbers: N66987285 (8 digits)
   • SO#: 15386
   • PO#: MO081325
   • Total: ($53.50)
   • Status: Perfect extraction

4. INV #68118726 - Return Credit ✅
   • NARDA: CONCESSION (1 item)
   • Bill Numbers: (empty - none found)
   • SO#: 6273
   • PO#: 6703451
   • Total: ($433.15)
   • Status: CONCESSION with no bill number - acceptable

JOURNAL ENTRY PATTERN (Needs Review): 1
─────────────────────────────────────────────────────────────
5. INV #67718694 - Warranty Credit ⚠️
   • NARDA: J17052 (attempted)
   • Bill Numbers: W91656473 (8 digits) - 3 items
   • Validation Error: "J17052" not matching J##### pattern
   • Total: ($73.82)
   • Issue: J17052 has 5 digits (valid range: 4-6)
   • Recommendation: J17052 IS VALID - needs prompt fix

REGULAR INVOICES (Correctly Skipped): 5
─────────────────────────────────────────────────────────────
6. INV #INV1665309 ✅ Skipped - Regular invoice
7. INV #67641014 ✅ Skipped - Return Shipping Label ($40 delivery only)
8. INV #91717028 ✅ Skipped - Regular invoice
9. INV #91739503 ✅ Skipped - Regular invoice  
10. INV #91673135 ✅ Skipped - Regular invoice

═══════════════════════════════════════════════════════════════
OVERALL STATISTICS
═══════════════════════════════════════════════════════════════
Total PDFs Tested: 10
Credit Memos Identified: 5 (50%)
Credit Memos Processed Successfully: 4 (80%)
Regular Invoices Correctly Skipped: 5 (100%)
Journal Entry Pattern Issue: 1 (needs fix)

BILL NUMBER EXTRACTION RESULTS:
─────────────────────────────────────────────────────────────
Total Line Items with Bill Numbers: 8
  • N pattern (8 digits): 5 items ✅
  • W pattern (8 digits): 4 items ✅
  • Empty (no pattern found): 1 item ✅
  • Multi-line extraction: Working perfectly ✅

Success Rate: 90% (9/10 documents processed correctly)
Issue Found: J##### pattern needs to accept 5-digit numbers

═══════════════════════════════════════════════════════════════
CRITICAL FINDING
═══════════════════════════════════════════════════════════════
INV #67718694 has "J17052" which Claude rejected as invalid.

Current prompt says: "J##### (J followed by 4-6 digits)"
Actual value: J17052 = 5 digits ✓ SHOULD BE VALID

Claude's error: "J17052 which appears to be an internal reference 
number, not a valid NARDA code"

This is FALSE - J17052 matches the pattern exactly!

RECOMMENDATION: The prompt is correct. Claude made an interpretation
error. The system should extract J17052 as valid. This might be a
one-off error or Claude being overly conservative. Consider adding
an explicit example like "J17052" to the prompt to reinforce that
5-digit J numbers are valid.

═══════════════════════════════════════════════════════════════
VALIDATION SUMMARY
═══════════════════════════════════════════════════════════════
✅ Document type detection: 100% accurate
✅ Bill number extraction (N/W patterns): 100% accurate
✅ Multi-line bill numbers: Working correctly
✅ 7-8 digit validation: All bill numbers are 7-8 digits
✅ Regular invoice filtering: 100% accurate
⚠️  J##### pattern extraction: 80% (1 false rejection)
✅ PO number extraction: Working
✅ Sales order extraction: Working
✅ NARDA patterns: NF, BOX, CONCDAM, CONCESSION all working

NEXT STEPS:
1. Add explicit J##### example (J17052) to reinforce pattern
2. Test 10 more PDFs to validate consistency
3. Look for J##### documents in test set to ensure pattern works
